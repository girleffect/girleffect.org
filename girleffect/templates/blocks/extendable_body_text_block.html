{% load wagtailimages_tags %}
{% image value.customisation.background_image max-100x100 as bg_img %}

{# StreamField customisations in parent DIV to blocks, include rich text headings #}
<div class="collapsible-body-text"
     style="{% if bg_img %}background:url({{ bg_img.url }});{% endif %}
                {% if value.customisation.background_hex %}background:{{ value.customisation.background_hex }};{% endif %}"
                {% if value.customisation.body_heading_hex %}data-hex="{{value.customisation.body_heading_hex}}"{% endif %}>
    
    <div class="collapsible-body-text body-text">
        {{ value.body_upper }}
    </div>

    <button class="collapsible-body-text--open">
        {{ value.extend_button_text|default:"See more" }}
    </button>

    <button class="collapsible-body-text--close">
        {{ value.collapse_button_text|default:"See less" }}
    </button>

    {# Will be hidden/shown on button toggle #}
    <div class="collapsible-body-text body-text--collapsible">
        {{ value.body_lower }}
    </div>
</div>