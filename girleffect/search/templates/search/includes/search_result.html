{% load static wagtailcore_tags wagtailsearchpromotions_tags wagtailimages_tags search_tags %}

{% if result.listing_image %}
    {% image result.listing_image fill-270x175 %}
{% else %}
    <div class="search-result__default-image"></div>
{% endif %}

    <div>
        <div>
            {# breadcrumbs #}
            {% if result.get_ancestors|length > 2 %}
                {% for ancestor in result.get_ancestors %}
                    {% if not ancestor.is_root %}
                        {% if ancestor.depth > 2 %}
                            {{ ancestor.title }}
                            {% if ancestor.depth|add:1 < result.depth %}
                                &nbsp;/&nbsp;
                            {% endif %}
                        {% else %}/{% endif %} {# the first one #}
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>

        <h4 class="search-result__heading">
            <a class="link link--underlined" href="{% pageurl result %}">
                {% if result.listing_title %}
                    {{ result.listing_title }}
                {% else %}
                    {{ result.title }}
                {% endif %}
            </a>
        </h4>

        {% preview result %}

    </div>
